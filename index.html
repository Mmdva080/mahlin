<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
        background: #0a0e17;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
        touch-action: none;
        user-select: none;
        cursor: grab;
    }

    #login {
        position: fixed;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        width: 90%;
        max-width: 350px;
        background: rgba(255,255,255,0.12);
        backdrop-filter: blur(20px);
        padding: 30px 35px;
        border-radius: 25px;
        border: 2px solid rgba(0,255,255,0.6);
        box-shadow: 0 0 40px rgba(0,255,255,0.8);
        text-align: center;
        color: white;
        font-family: Tahoma, sans-serif;
    }

    #login h1 {
        font-size: 30px;
        background: linear-gradient(90deg, #00ffff, #00b7eb);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 20px;
    }

    input, button {
        width: 100%;
        padding: 14px;
        margin: 12px 0;
        border: none;
        border-radius: 14px;
        font-size: 18px;
    }

    input {
        background: rgba(255,255,255,0.25);
        color: white;
        text-align: center;
    }

    button {
        background: linear-gradient(45deg, #00ffff, #0088ff);
        color: black;
        font-weight: bold;
        cursor: pointer;
        transition: 0.3s;
    }

    button:hover {
        transform: scale(1.05);
        box-shadow: 0 0 25px cyan;
    }

    img {
        max-width: 120px !important;
        pointer-events: auto;
        user-select: none;
    }
</style>

</head>
<body>

<div id="login">
    <h1>ورود</h1>
    <input type="text" id="user" placeholder="نام کاربری">
    <input type="password" id="pass" placeholder="رمز عبور">
    <button onclick="enter()">ورود</button>
</div>

<div id="world"></div>

<audio id="meow" src="https://assets.mixkit.co/sfx/preview/mixkit-cat-meow-1456.mp3"></audio>
<audio id="purr" src="https://assets.mixkit.co/sfx/preview/mixkit-cat-purr-1457.mp3"></audio>

<script src="https://cdn.jsdelivr.net/npm/matter-js@0.19.0/build/matter.min.js"></script>
<script>

const MAX_CATS = 15;
let cats = [];

function enter() {
    if (user.value.trim() === 'ماهلین' && pass.value.trim() === 'ماهلین') {
        login.remove();
        initWorld();
        setInterval(addCat, 800);
    } else alert('هر دو را "ماهلین" بزن');
}

let engine, world, render, mouse, mouseConstraint;

function initWorld() {
    const Matter = window.Matter;
    engine = Matter.Engine.create();
    world = engine.world;
    world.gravity.y = 0.35;

    render = Matter.Render.create({
        element: worldDiv,
        engine: engine,
        options: {
            width: window.innerWidth,
            height: window.innerHeight,
            wireframes: false,
            background: 'transparent'
        }
    });

    Matter.World.add(world, [
        Matter.Bodies.rectangle(innerWidth/2, -50, innerWidth+200, 100, { isStatic: true }),
        Matter.Bodies.rectangle(innerWidth/2, innerHeight+50, innerWidth+200, 100, { isStatic: true }),
        Matter.Bodies.rectangle(-50, innerHeight/2, 100, innerHeight+200, { isStatic: true }),
        Matter.Bodies.rectangle(innerWidth+50, innerHeight/2, 100, innerHeight+200, { isStatic: true })
    ]);

    mouse = Matter.Mouse.create(render.canvas);
    mouseConstraint = Matter.MouseConstraint.create(engine, {
        mouse: mouse,
        constraint: { stiffness: 0.2, render: { visible: false }}
    });
    Matter.World.add(world, mouseConstraint);

    Matter.Render.run(render);
    Matter.Runner.run(Matter.Runner.create(), engine);
}

function addCat() {
    if (cats.length >= MAX_CATS) {
        const old = cats.shift();
        old.img.remove();
        Matter.World.remove(world, old.body);
    }

    const cat = document.createElement('img');
    cat.src = "cat.png";
    cat.style.position = 'absolute';
    document.body.appendChild(cat);

    const body = Matter.Bodies.circle(innerWidth/2, innerHeight/2, 50, {
        render: { visible: false },
        restitution: 0.9,
        frictionAir: 0.01
    });
    Matter.World.add(world, body);

    const updateCat = () => {
        cat.style.left = body.position.x + 'px';
        cat.style.top = body.position.y + 'px';
        cat.style.transform = `translate(-50%, -50%) rotate(${body.angle}rad)`;
    };
    Matter.Events.on(engine, 'afterUpdate', updateCat);

    cat.addEventListener('touchstart', playSound);
    cat.addEventListener('mousedown', playSound);

    cats.push({ img: cat, body });

    setTimeout(() => {
        cat.remove();
        Matter.World.remove(world, body);
        cats = cats.filter(c => c.body !== body);
    }, 24000);
}

function playSound() {
    const s = Math.random() > 0.5 ? 'meow' : 'purr';
    document.getElementById(s).play();
}

window.addEventListener('resize', () => {
    render.canvas.width = innerWidth;
    render.canvas.height = innerHeight;
});

document.addEventListener('keypress', e => e.key === "Enter" && enter());

</script>
</body>
</html>
